<!DOCTYPE html>
<html>
<head>
  <meta charset='utf-8'>

  <title>EmbedMonster</title>

	<script src="EmbedMonster/vendor/swfobject.js" type="text/javascript" charset="utf-8"></script>
	<script src="EmbedMonster/vendor/soundcloud.player.api.js" type="text/javascript" charset="utf-8"></script>

	<script src="EmbedMonster/lib/EmbedMonster.js" type="text/javascript" charset="utf-8"></script>
	<script src="EmbedMonster/lib/EmbedSource.js" type="text/javascript" charset="utf-8"></script>

	<script src="EmbedMonster/lib/sources/YouTube.js" type="text/javascript" charset="utf-8"></script>
	<script src="EmbedMonster/lib/sources/Vimeo.js" type="text/javascript" charset="utf-8"></script>
	<script src="EmbedMonster/lib/sources/SoundCloud.js" type="text/javascript" charset="utf-8"></script>

	<script src="EmbedMonster/lib/sources/AudioTag.js" type="text/javascript" charset="utf-8"></script>
	<script src="EmbedMonster/lib/sources/VideoTag.js" type="text/javascript" charset="utf-8"></script>
	
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript" charset="utf-8"></script>
	
	<script type="text/javascript" charset="utf-8">
		$(function(){
			$("#demoSources a").click(function(e){
				e.preventDefault();

				var $this = $(this);
				var url = $this.attr("href");
				
				window.currentSource = null;
				EmbedMonster.load(url, $("#player")[0], function(err, media){
					if(!err){
						window.currentSource = media;
						media.play();
						
						media.onUpdateState = function(state){
//							console.log("State updated " + source.isPlaying(), JSON.stringify(state));
							var duration = $("#duration");
							duration.text(secondsToTimeString(state.currentTime) + " / " + secondsToTimeString(state.duration));
                        
							var maxWidth = 500;
							var progressBarLoaded = $("#progressBarLoaded")[0];
							progressBarLoaded.style.width = "" + (state.percentLoaded * maxWidth) + "px";
                        
							var progressBarStatus = $("#progressBarStatus")[0];
							progressBarStatus.style.width = "" + (state.percentTime * maxWidth) + "px";
							
							$("#playPause").text(media.isPlaying() ? "Pause" : "Play");
						};

					}
				});
				
				return false;
			});
		});
		
		function secondsToTimeString(seconds){
			var hours = Math.floor(seconds > 3600 ? seconds / 3600 : 0);
			var minutes = Math.floor((seconds - (hours * 3600)) / 60);
			var seconds = Math.floor((seconds - (hours * 3600) - (minutes * 60)));
			
			var pieces = [];
			if(hours > 0){
				pieces.push("" + hours);
				pieces.push(":");
			}
			
			if(minutes < 10 && pieces.length > 0){
				pieces.push("0");
			}

			pieces.push("" + minutes);
			pieces.push(":");
			
			if(seconds < 10){
				pieces.push("0");
			}
			pieces.push("" + seconds);
			
			return pieces.join("");
		};
	</script>

  <style type="text/css">
    body {
      margin-top: 1.0em;
      background-color: #ffffff;
      font-family: Helvetica, Arial, FreeSans, san-serif;
      color: #000000;
    }
    #container {
      margin: 0 auto;
      width: 700px;
    }
    h1 { font-size: 3.8em; color: #000000; margin-bottom: 3px; }
    h1 .small { font-size: 0.4em; }
    h1 a { text-decoration: none }
    h2 { font-size: 1.5em; color: #000000; }
    h3 { text-align: center; color: #000000; }
    a { color: #000000; }
    .description { font-size: 1.2em; margin-bottom: 30px; margin-top: 30px; }
    .download { float: right; }
    pre { background: #000; color: #fff; padding: 15px;}
    hr { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    .footer { text-align:center; padding-top:30px; font-style: italic; }

	#player{
		width: 700px;
		height: 400px;
		background-color: black;
	}
  </style>
</head>

<body>
  <a href="https://github.com/amazingsyco/EmbedMonster"><img style="position: absolute; top: 0; right: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub" /></a>

  <div id="container">

    <div class="download">
      <a href="https://github.com/amazingsyco/EmbedMonster/zipball/master">
        <img border="0" width="90" src="https://github.com/images/modules/download/zip.png"></a>
      <a href="https://github.com/amazingsyco/EmbedMonster/tarball/master">
        <img border="0" width="90" src="https://github.com/images/modules/download/tar.png"></a>
    </div>

    <h1><a href="https://github.com/amazingsyco/EmbedMonster">EmbedMonster</a><br />
      <span class="small">by <a href="https://github.com/amazingsyco">Steve Streza</a></span></h1>

    <div class="description">
      EmbedMonster is a JavaScript microframework for controlling embeddable media on the web. Whether you're hosting the media yourself, or taking it from a source such as YouTube, you can use one easy and consistent JavaScript API to load and control embeddable media. It has a plugin-based architecture, letting developers implement new sources or prune unneeded sources from apps they build. The purpose of this project is to enable developers to build web applications that make great use of audio/video media, whether hosted on their own server, or provided through a third party service. <strong>Still in active development, not ready for use quite yet.</strong>
    </div>

	<h2>Demo</h2>
	<div id="demo">
		<div id='player'></div>
		<div id='playbackControls' style="background-color: #eee; padding: 0px; margin: 0px; padding-bottom: 1em;">
			<div id="playPause" style="width: 100px; height: 20px; float:left;" onclick="if(window.currentSource){ window.currentSource.playPause(); }">Play/Pause</div>
			<div id="progressBar" style="width: 500px; height: 20px; background-color: gray; float: left; position: relative;">
				<div id="progressBarLoaded" style="width: 0px; height: 20px; background-color: yellow; position: absolute; top: 0px; left:0px;"></div>
				<div id="progressBarStatus" style="width: 0px; height: 20px; background-color: orange; position: absolute; top: 0px; left:0px;"></div>
			</div>
			<div id="duration" style="width: 100px; height: 20px; float: right; text-align: right;">0:00/0:00</div>
		</div>
		<div id="demoSources" style="text-align: center">
			<a href="http://www.youtube.com/watch?v=bEsvYrw-sMQ">Try YouTube</a> |
			<a href="http://soundcloud.com/tibocut/fridayfolly-ringtone1">Try SoundCloud</a>
		</div>
	</div>

	<h2>Features</h2>
	<ul>
		<li>Modular architecture</li>
		<li>Small footprint</li>
		<li>Simple API</li>
		<li>No major framework dependencies (e.g. you can use jQuery, Prototype, Dojo, YUI, Cappuccino, whatever)</li>
		<li>Graceful failures for unsupported browsers or plugins</li>
	</ul>
	
	<h2>Sources</h2>
	<ul>
		<li>YouTube</li>
		<li>SoundCloud</li>
		<li>Vimeo <em>(coming soon!)</em></li>
		<li>Netflix <em>(coming soon!)</em></li>
		<li>&lt;audio&gt; tag <em>(coming soon!)</em></li>
		<li>&lt;video&gt; tag <em>(coming soon!)</em></li>
	</ul>

      <h2>Authors</h2>
      <p><a href="https://twitter.com/SteveStreza">Steve Streza</a>
<br/>      </p>
    
    <h2>Download</h2>
    <p>
      You can download this project in either
      <a href="https://github.com/amazingsyco/EmbedMonster/zipball/master">zip</a> or
      <a href="https://github.com/amazingsyco/EmbedMonster/tarball/master">tar formats.
    </p>
    <p>You can also clone the project with <a href="http://git-scm.com">Git</a>
      by running:
      <pre>$ git clone git://github.com/amazingsyco/EmbedMonster</pre>
    </p>

    <div class="footer">
      get the source code on GitHub : <a href="https://github.com/amazingsyco/EmbedMonster">amazingsyco/EmbedMonster</a>
    </div>

  </div>

</body>
</html>
